---
title: 深拷贝浅拷贝
date: 2022-12-07 21:46:32
tags: Python
categories: Python面试题
cover: https://images.unsplash.com/photo-1666625628272-a1071f6f7173
comments: false
---

## 1、Python 深拷贝和浅拷贝概念理解

### 前提知识

- Python 中对象包含的三个基本要素，分别是：id(身份标识)、type(数据类型)和value(值)。

- `is`和 `==` 都是对对象进行比较判断作用的，但比较判断的内容并不相同：
  
  - `==` 是python标准操作符中的**比较**操作符，用来比较判断两个对象的 value (值) 是否相等。
  
  - `is` 也被叫做**同一性**运算符，这个运算符比较判断的是对象间的唯一身份标识，也就是说它判断的是两个对象的 id是否相同。

## 简介

浅拷贝：重新分配一块内存，创建一个新的对象，但里面的元素是对原对象中各个子对象的引用（原地址）。

深拷贝：重新分配一块内存，创建一个新的对象，并且将原对象中的元素，以递归的方式，通过创建新的子对象拷贝到新对象中（新地址）。因此，新对象和原对象没有任何关联。

### 直接的例子

```python
1.>>> import copy
2.>>> a = 1
3.>>> b = a
4.>>> c = copy.copy(a)
5.>>> d = copy.deepcopy(a)
6.>>> id(a), id(b), id(c), id(d)
7.(94423772740928, 94423772740928, 94423772740928, 94423772740928) # 无论采用哪种拷贝方式，都是完全相同的内存地址，因为只是增加了一个引用计数
8.>>> e = 1 # 即使是直接赋值，只要值相同，也是与上面相同的内存地址
9.>>> id(e)
10.94423772740928
11.>>> b = 2
12.>>> id(b)
13.94423772740960 # 一旦值不同，内存地址就不同
```

### 浅拷贝的产生

- 使用数据类型**本身的构造器**
- 对于**可变的序列**，还可以通过切片操作符 : 来完成浅拷贝（元组、字符串除外）。
- Python 还提供了对应的函数 **copy.copy()** 函数，适用于任何数据类型

> 当内层为可变数据类型时，深拷贝后内层外层地址均发生改变。当内层为不可变数据类型时，外层不管是可变还是不可变数据类型，使用深拷贝，都不会改变内层地址，只会在外层为可变数据类型时，改变外层地址。
> 
> 使用浅拷贝是只能在外层数据类型为可变数据类型时，才能改变外层地址。而内层地址，无论是否为可变数据类型还是不可变数据类型，使用浅拷贝都不会改变内层数据类型地址。

## Ref

- [Python中的浅拷贝和深拷贝（一看就懂！！！）_时代&信念的博客-CSDN博客_python 深拷贝 浅拷贝](https://blog.csdn.net/Elon15/article/details/125256787)

- [cloudflare加速博客网站出现“此页面不能正确地重定向”的解决办法_喆旭电科的博客-CSDN博客_如何解决cloudflare](https://blog.csdn.net/bcnchina/article/details/106032854)
